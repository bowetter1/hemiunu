{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <h2 class="form-title">L√§gg till ny kontakt</h2>

    <form id="addContactForm" class="add-contact-form" aria-label="L√§gg till ny kontakt">
        <!-- Name field (required) -->
        <div class="field-group">
            <label for="name" class="form-label required">Namn</label>
            <input
                type="text"
                id="name"
                name="name"
                class="form-input"
                placeholder="Ange namn"
                aria-required="true"
                aria-invalid="false"
            />
            <span class="error-message" role="alert"></span>
        </div>

        <!-- Email field (optional) -->
        <div class="field-group">
            <label for="email" class="form-label">E-post</label>
            <input
                type="email"
                id="email"
                name="email"
                class="form-input mono-input"
                placeholder="namn@example.com"
                aria-invalid="false"
            />
            <span class="error-message" role="alert"></span>
        </div>

        <!-- Phone field (optional) -->
        <div class="field-group">
            <label for="phone" class="form-label">Telefon</label>
            <input
                type="tel"
                id="phone"
                name="phone"
                class="form-input mono-input"
                placeholder="070-123 45 67"
            />
        </div>

        <button type="submit" class="btn btn-primary btn-submit">
            L√§gg till kontakt
        </button>
    </form>
</div>

<!-- Contact List Section -->
<section class="contact-list-section">
    <!-- Search Section -->
    <div class="search-section">
        <div class="search-container">
            <!-- Search Icon -->
            <span class="search-icon" aria-hidden="true">üîç</span>

            <!-- Search Input -->
            <input
                type="search"
                id="contactSearch"
                class="search-input"
                placeholder="S√∂k kontakter..."
                role="searchbox"
                aria-label="S√∂k kontakter efter namn, e-post eller telefon"
            />

            <!-- Clear Button -->
            <button
                id="clearSearch"
                class="clear-button"
                aria-label="Rensa s√∂kning"
                title="Rensa"
                type="button"
                style="display: none;"
            >
                √ó
            </button>
        </div>

        <!-- Screen reader result announcement -->
        <div id="searchResultsStatus" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    </div>

    <h2 class="section-heading">Kontakter <span class="count" id="contactCount">(0)</span></h2>

    <!-- Contact Grid -->
    <div id="contactGrid" class="contact-grid">
        <!-- Contacts will be loaded here -->
    </div>

    <!-- Empty State (shown when no contacts) -->
    <div id="emptyState" class="empty-state" style="display: none;">
        <div class="empty-icon">üìá</div>
        <h3>Inga kontakter √§nnu</h3>
        <p>L√§gg till din f√∂rsta kontakt med formul√§ret ovan.</p>
    </div>

    <!-- No Results State (shown when search returns empty) -->
    <div id="noResultsState" class="no-results-state" style="display: none;">
        <div class="no-results-icon">üîç</div>
        <h3>Inga tr√§ffar</h3>
        <p>F√∂rs√∂k med ett annat s√∂kord</p>
    </div>
</section>

<!-- Toast container (hidden by default) -->
<div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>

<!-- Confirmation Modal (Sprint 5: Delete Contact) -->
<div
    id="deleteModal"
    class="modal-overlay"
    role="dialog"
    aria-modal="true"
    aria-labelledby="deleteModalTitle"
    aria-describedby="deleteModalDescription"
>
    <div class="modal-content">
        <!-- Close Button -->
        <button
            id="modalCloseBtn"
            class="modal-close"
            aria-label="St√§ng"
            title="St√§ng"
            type="button"
        >
            √ó
        </button>

        <!-- Warning Icon -->
        <div class="modal-icon" aria-hidden="true">‚ö†Ô∏è</div>

        <!-- Heading -->
        <h2 id="deleteModalTitle" class="modal-title">
            Radera kontakt?
        </h2>

        <!-- Message -->
        <p id="deleteModalDescription" class="modal-message">
            Vill du verkligen ta bort <strong id="contactNameToDelete"></strong>?
        </p>

        <!-- Warning -->
        <p class="modal-warning">
            Denna √•tg√§rd kan inte √•ngras.
        </p>

        <!-- Buttons (Reversed Order - Scandinavian Pattern) -->
        <div class="modal-buttons">
            <!-- Cancel button (appears first visually, default focus) -->
            <button
                id="modalCancelBtn"
                class="modal-button btn-cancel"
                aria-label="Avbryt radering"
                type="button"
            >
                Avbryt
            </button>

            <!-- Delete button (appears last visually) -->
            <button
                id="modalDeleteBtn"
                class="modal-button btn-delete"
                aria-label="Radera kontakt permanent"
                type="button"
            >
                Radera
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/app.js"></script>
{% endblock %}
